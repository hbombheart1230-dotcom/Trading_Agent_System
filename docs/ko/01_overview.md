# 1. 시스템 개요 및 비전

## 1.1 목표
Trading Agent System은 **에이전트형 자동매매 시스템**으로,
다음 목표를 만족한다.

- **안전성 우선**: 실거래는 항상 “승인 + 가드”를 통과해야 한다.
- **책임 분리**: 판단(Agent Layer)과 실행(Execution Layer)을 완전히 분리한다.
- **재현성**: run_id 기반으로 모든 의사결정/실행을 추적 가능해야 한다.
- **확장성**: LangGraph 오케스트레이션으로 자연스럽게 확장 가능해야 한다.
- **운영성**: 운영자가 시스템을 “멈추고/허용하고/감사”할 수 있어야 한다.

## 1.2 핵심 구성 요소
- Commander: 한 사이클(run)을 오케스트레이션
- Strategist: 후보/시나리오/제약 제안
- Scanner: 데이터 수집/특징 계산/랭킹
- Monitor: 신호 감시 → OrderIntent 생성(절대 실행 금지)
- Supervisor: 위험/정책 검증 → 승인/거절/수정
- Executor: 승인된 의도만 실행(Execution Layer 호출)
- Reporter: 로그 기반 리포트/사후분석

## 1.3 “엔터프라이즈” 정의
본 문서에서 “엔터프라이즈”는 다음을 의미한다.
- 운영 기준(런북/장애대응/롤백/알림)
- 보안 기준(시크릿/권한/감사)
- 품질 기준(회귀/계약 안정성/테스트 커버리지)
- 변경관리 기준(마이그레이션/호환성/버저닝)

## 1.4 아키텍처 한눈에 보기 (텍스트 다이어그램)

[User/Operator]
      |
      v
+-------------------+
| Commander (Cycle) |
+-------------------+
      |
      v
+-----------+    +---------+    +---------+
| Strategist| -> | Scanner | -> | Monitor |
+-----------+    +---------+    +---------+
      |                               |
      |                               v
      |                         +-------------+
      |                         | OrderIntent |
      |                         +-------------+
      |                               |
      v                               v
+-------------------+        +-------------------+
| Supervisor (Gate) | -----> | AgentExecutor     |
+-------------------+        +-------------------+
                                      |
                                      v
                           +-----------------------+
                           | Execution Layer       |
                           | (Guards + Broker API) |
                           +-----------------------+
                                      |
                                      v
                            +---------------------+
                            | EventLog / Reports  |
                            +---------------------+

핵심: Agent는 “의도”까지만, 실행은 “가드”에서만.
